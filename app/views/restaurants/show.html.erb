<!DOCTYPE html>
<html>
  <head>
    <title>
    </title>
  </head>

  <body>
    <h1 class="h1-resto"><%= @restaurant.restaurant_name %></h1>

    <div class="show-content">
      <section class="menu-img">
        <% if @restaurant.image.attached? %>
          <%= image_tag @restaurant.image, alt: 'image', class:"image_tag_upld" %>
        <% else %>
          <p class="p-contact"> NO MENU YET </p>
        <% end %>

        <div class="upload-img">
          <% if current_admin == @restaurant.admin %>
              <%= form_tag restaurant_images_path(@restaurant), multipart: true do %>
                <%= file_field_tag :image, class:"btn mt-3 btn-up-show" %>
                <%= submit_tag "UPLOAD", class:"btn mt-3 btn-up-show" %>
              <% end %>

              <%= form_with(model: [:id, @restaurant], local: true, url: restaurant_path, method: "delete") do |form| %>
                <%= form.submit "Delete", class: "btn mt-3 btn-del-show" %>
              <% end %>
          <% end %>
        </div>
        
      </section>

      <section class="infos-resto">
        <p class="description">
          Bienvenue chez <%= @restaurant.restaurant_name %> ! Plongez dans une expérience culinaire authentique où les saveurs du Mexique vous transportent instantanément. Dégustez nos délicieux tacos, enchiladas et fajitas, accompagnés de margaritas rafraîchissantes. Notre ambiance vibrante et nos plats savoureux vous promettent une soirée inoubliable. Venez découvrir la vraie essence du Mexique chez nous !
        </p>
        
        <%= form_with(model: @restaurant, url: restaurant_path(@restaurant), method: :patch) do |form| %>
 

          <div class="field">
            <%= form.label :reservation_limit %>
            <%= form.number_field :reservation_limit, min: 0 %>
          </div>
        
          <%= form.submit %>
        <% end %>

        <%= form_with(model: [@restaurant, @reservation], url: new_restaurant_reservation_path(@restaurant), method: :get) do |form| %>
          <div class="field">
            <%= form.label :date %>
            <%= form.date_field :date, class: "form-control" %>
          </div>
        
          <div class="field">
            <%= form.label :time %>
            <%= form.time_field :time, class: "form-control" %>
          </div>
        
      
        
          <%= form.submit "Book Table", class: "btn btn-book-show" %>
        <% end %>
        
      </section>
    </div>

      <section class="show-comments">
        <h2>Commentaires</h2>
          <% @comment.each do |comment| %>
            <div>
              <p><%= comment.body %></p>
              <% if current_user == comment.user %>
                <%= button_to "Destroy this comment", restaurant_comment_path(@restaurant, comment), method: :delete, class: "btn btn-danger", form: { data: { turbo_confirm: "Are you sure?" } } %>
              <% end %>
            </div>
          <% end %>

        <% if current_user %>
          <h2>Ajoute un nouveau commentaire</h2>
          <%= render partial: "comments/form", locals: { restaurant: @restaurant } %>
        <% end %>
      </section>
      <% if @restaurant.reservation_limit.present? %>
      <p>Maximum number of reservations: <%= @restaurant.reservation_limit %></p>
    <% else %>
      <p>No reservation limit set for this restaurant.</p>
    <% end %>
  </body>
</html>
